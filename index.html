<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="GündemLive - Türkiye'nin en güncel haberleri, son dakika gelişmeleri, politika, ekonomi, spor, teknoloji, dünya ve daha fazlası. Tarafsız ve güvenilir habercilik.">
  <meta name="keywords" content="haberler, gündem, son dakika, Türkiye, ekonomi, spor, dünya, politika, teknoloji, kültür, sanat, güncel haberler, arama, kategoriler">
  <meta name="author" content="GündemLive">
  <title>GündemLive - Güncel Türkiye Haberleri ve Son Dakika Gelişmeleri</title>

  <!-- Favicon (Şimşek Logolu) -->
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2965/2965879.png" type="image/png">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary-color: #003366;
      --secondary-color: #0066cc;
      --accent-color: #ffcc00;
      --dark-color: #1a1a1a;
      --light-color: #f8f9fa;
      --text-color: #333;
      --white: #fff;
      --card-bg: var(--white);
      --border-color: #dee2e6;
      --section-bg: #f5f5f5;
    }

    body.dark-mode {
      --primary-color: #004080;
      --secondary-color: #0077e6;
      --accent-color: #ffd700;
      --dark-color: #121212;
      --light-color: #1e1e1e;
      --text-color: #e0e0e0;
      --white: #2d2d2d;
      --card-bg: #252525;
      --border-color: #444;
      --section-bg: #121212;
    }

    body {
      font-family: 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--section-bg);
      color: var(--text-color);
      transition: all 0.3s ease;
      line-height: 1.6;
    }

    h1, h2, h3, h4, h5, h6 {
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
    }

    /* Navbar */
    .navbar {
      background-color: var(--primary-color);
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      position: sticky;
      top: 0;
      z-index: 1000;
      padding: 0.8rem 0;
    }

    .navbar-brand {
      font-weight: 700;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      letter-spacing: 0.5px;
    }

    .navbar-brand img {
      height: 32px;
      margin-right: 10px;
      filter: drop-shadow(0 0 2px rgba(255, 204, 0, 0.7));
      transition: transform 0.3s ease;
    }

    .navbar-brand:hover img {
      transform: scale(1.1);
    }

    .nav-link {
      font-weight: 500;
      margin: 0 5px;
      transition: all 0.3s ease;
      padding: 0.5rem 1rem !important;
      border-radius: 4px;
    }

    .navbar-brand, .nav-link {
      color: var(--white) !important;
    }

    .navbar-brand:hover, .nav-link:hover {
      color: var(--accent-color) !important;
    }

    .nav-link:hover {
      background-color: rgba(255,255,255,0.1);
    }

    /* Logo Animasyonu */
    @keyframes lightning {
      0% { opacity: 1; }
      50% { opacity: 0.7; filter: drop-shadow(0 0 5px var(--accent-color)); }
      100% { opacity: 1; }
    }

    .lightning-logo {
      animation: lightning 3s infinite;
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: var(--white);
      padding: 80px 20px;
      text-align: center;
      position: relative;
      overflow: hidden;
      margin-bottom: 40px;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://images.unsplash.com/photo-1586339949916-3e9457bef6d3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80') no-repeat center center/cover;
      opacity: 0.15;
      z-index: 1;
    }

    .hero-content {
      position: relative;
      z-index: 2;
      max-width: 900px;
      margin: 0 auto;
    }

    .hero h1 {
      font-size: 3.2rem;
      font-weight: 700;
      margin-bottom: 20px;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
      line-height: 1.2;
    }

    .hero p {
      font-size: 1.3rem;
      margin: 0 auto 30px;
      max-width: 700px;
      opacity: 0.9;
    }

    /* Breaking News Banner */
    .breaking-news {
      background-color: var(--accent-color);
      color: var(--dark-color);
      padding: 10px 0;
      font-weight: 600;
      text-align: center;
      margin-bottom: 30px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .breaking-news span {
      background-color: var(--dark-color);
      color: var(--accent-color);
      padding: 3px 10px;
      border-radius: 4px;
      margin-right: 15px;
      font-size: 0.9rem;
    }

    /* Carousel Section */
    .carousel-section {
      max-width: 1200px;
      margin: 0 auto 50px;
      padding: 0 15px;
    }

    .section-title {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
      padding-bottom: 15px;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 3px;
      background-color: var(--accent-color);
    }

    #newsCarousel .carousel-item {
      height: 500px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    #newsCarousel .carousel-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    #newsCarousel .carousel-item:hover img {
      transform: scale(1.03);
    }

    #newsCarousel .carousel-caption {
      background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
      padding: 30px;
      text-align: left;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
    }

    #newsCarousel .carousel-caption h5 {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 15px;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
    }

    #newsCarousel .carousel-caption p {
      font-size: 1.1rem;
      margin-bottom: 20px;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
      opacity: 0.9;
    }

    #newsCarousel .carousel-caption .btn {
      background-color: var(--accent-color);
      border-color: var(--accent-color);
      color: var(--dark-color);
      font-weight: 600;
      padding: 8px 20px;
      border-radius: 50px;
      transition: all 0.3s ease;
    }

    #newsCarousel .carousel-caption .btn:hover {
      background-color: transparent;
      color: var(--accent-color);
      border-color: var(--accent-color);
      transform: translateY(-3px);
    }

    /* News Section */
    .news-section {
      max-width: 1200px;
      margin: 0 auto 60px;
      padding: 0 15px;
    }

    .news-card {
      margin-bottom: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      border: none;
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
      height: 100%;
      background-color: var(--card-bg);
    }

    .news-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.15);
    }

    .news-card .card-img-top {
      height: 220px;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .news-card:hover .card-img-top {
      transform: scale(1.05);
    }

    .news-card .card-body {
      padding: 20px;
      display: flex;
      flex-direction: column;
      height: calc(100% - 220px);
    }

    .news-card .category-badge {
      background-color: var(--primary-color);
      color: white;
      padding: 3px 10px;
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      margin-bottom: 10px;
      align-self: flex-start;
    }

    .news-card h5 {
      font-weight: 600;
      margin-bottom: 12px;
      color: var(--primary-color);
      transition: color 0.3s ease;
    }

    .news-card:hover h5 {
      color: var(--accent-color);
    }

    .news-card .card-text {
      font-size: 0.95rem;
      color: var(--text-color);
      margin-bottom: 15px;
      flex-grow: 1;
      opacity: 0.9;
    }

    .news-card .news-meta {
      font-size: 0.85rem;
      color: #6c757d;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
    }

    body.dark-mode .news-card .news-meta {
      color: #aaa;
    }

    .news-card .news-meta i {
      margin-right: 5px;
      color: var(--accent-color);
    }

    .news-card .btn-primary {
      background-color: var(--primary-color);
      border-color: var(--primary-color);
      font-weight: 500;
      border-radius: 50px;
      padding: 8px 20px;
      align-self: flex-start;
      transition: all 0.3s ease;
    }

    .news-card .btn-primary:hover {
      background-color: var(--secondary-color);
      border-color: var(--secondary-color);
      transform: translateY(-3px);
    }

    /* Newsletter Section */
    .newsletter-section {
      background-color: var(--primary-color);
      color: white;
      padding: 50px 0;
      margin: 60px 0;
    }

    .newsletter-container {
      max-width: 800px;
      margin: 0 auto;
      text-align: center;
    }

    .newsletter-form {
      display: flex;
      max-width: 500px;
      margin: 20px auto 0;
    }

    .newsletter-form input {
      flex-grow: 1;
      padding: 12px 15px;
      border: none;
      border-radius: 50px 0 0 50px;
      font-size: 1rem;
    }

    .newsletter-form button {
      background-color: var(--accent-color);
      color: var(--dark-color);
      border: none;
      padding: 0 25px;
      border-radius: 0 50px 50px 0;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .newsletter-form button:hover {
      background-color: #ffd700;
    }

    /* Kalan CSS kodu... */
    /* ... (Önceki CSS kodunuzun geri kalanı aynen kalacak) ... */
  </style>
</head>
<body>

<!-- Breaking News Banner -->
<div class="breaking-news">
  <div class="container">
    <span>SON DAKİKA</span>
    <span id="breakingNewsText">Türkiye'de yeni ekonomik paket açıklandı! Detaylar için tıklayın.</span>
  </div>
</div>

<nav class="navbar navbar-expand-lg navbar-dark">
  <div class="container">
    <a class="navbar-brand" href="#">
      <img src="https://cdn-icons-png.flaticon.com/512/2965/2965879.png" alt="GündemLive Logo" class="lightning-logo">
      Gündem<span style="color: var(--accent-color)">Live</span>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="#">Ana Sayfa</a></li>
        <li class="nav-item"><a class="nav-link" href="#slider">Öne Çıkanlar</a></li>
        <li class="nav-item"><a class="nav-link" href="#haberler">Son Haberler</a></li>
        <li class="nav-item"><a class="nav-link" href="#kategoriler">Kategoriler</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#aboutModal">Hakkımızda</a></li>
        <li class="nav-item">
          <button id="darkModeToggle" class="btn btn-link nav-link" aria-label="Karanlık Mod">
            <i class="fas fa-moon"></i>
          </button>
        </li>
      </ul>
    </div>
  </div>
</nav>

<header class="hero">
  <div class="hero-content">
    <h1>Gündemi Yakından Takip Et</h1>
    <p>Türkiye ve dünyadan en güncel haberler, son dakika gelişmeleri, analizler ve özel içerikler her gün burada!</p>
    <a href="#haberler" class="btn btn-warning btn-lg">Son Haberleri Gör <i class="fas fa-arrow-down ms-2"></i></a>
  </div>
</header>

<section id="slider" class="carousel-section">
  <h2 class="section-title text-primary">Öne Çıkan Haberler</h2>
  <div id="newsCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="6000">
    <div class="carousel-indicators" id="carouselIndicators">
    </div>
    <div class="carousel-inner" id="carouselInner">
      <p class="text-center text-secondary"><i class="fas fa-spinner fa-spin me-2"></i> Slider haberleri yükleniyor...</p>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#newsCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#newsCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
</section>

<section class="search-bar">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="input-group">
              <input type="text" id="newsSearchInput" class="form-control" placeholder="Haber başlığı veya içerik ara..." aria-label="Haberlerde ara">
              <button class="btn btn-primary" type="button" id="newsSearchButton"><i class="fas fa-search me-2"></i> Ara</button>
          </div>
        </div>
      </div>
    </div>
</section>

<section id="kategoriler" class="categories-section">
  <div class="container">
    <h2 class="section-title text-primary">Kategoriler</h2>
    <div class="d-flex flex-wrap justify-content-center" id="categoryPills">
      <a href="#" class="category-pill active" data-filter="all">Tümü</a>
      <a href="#" class="category-pill" data-filter="siyaset">Politika</a>
      <a href="#" class="category-pill" data-filter="ekonomi">Ekonomi</a>
      <a href="#" class="category-pill" data-filter="spor">Spor</a>
      <a href="#" class="category-pill" data-filter="teknoloji">Teknoloji</a>
      <a href="#" class="category-pill" data-filter="yaşam">Yaşam</a>
      <a href="#" class="category-pill" data-filter="dünya">Dünya</a>
      <a href="#" class="category-pill" data-filter="sağlık">Sağlık</a>
      <a href="#" class="category-pill" data-filter="eğitim">Eğitim</a>
    </div>
  </div>
</section>

<section id="haberler" class="news-section">
  <div class="container">
    <h2 class="section-title text-primary">Son Dakika Haberleri</h2>
    <div id="newsContainer" class="row">
      <p class="text-center"><i class="fas fa-spinner fa-spin me-2"></i> Haberler yükleniyor...</p>
    </div>
    <div class="text-center mt-4">
      <button id="loadMoreBtn" class="btn btn-outline-primary">Daha Fazla Haber Yükle <i class="fas fa-plus ms-2"></i></button>
    </div>
  </div>
</section>

<!-- Newsletter Section -->
<section class="newsletter-section">
  <div class="newsletter-container">
    <h3>Haber Bültenimize Abone Olun</h3>
    <p>Güncel haberler e-posta adresinize gelsin</p>
    <form class="newsletter-form">
      <input type="email" placeholder="E-posta adresiniz" required>
      <button type="submit">Abone Ol</button>
    </form>
  </div>
</section>

<!-- Kalan HTML kodu aynı şekilde devam ediyor... -->
<!-- ... (Önceki HTML kodunuzun geri kalanı aynen kalacak) ... -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  let allNewsData = []; // Tüm haberleri saklamak için global değişken
  let currentDisplayCount = 12; // Başlangıçta gösterilecek haber sayısı

  // Breaking News Text
  const breakingNewsTexts = [
    "Bakanlar Kurulu toplantısı sona erdi! Yeni kararlar açıklandı",
    "Dolar ve Euro'da son durum: Merkez Bankası'ndan açıklama geldi",
    "Spor Toto Süper Lig'de şampiyonluk yarışı kızışıyor",
    "Teknoloji devinden yeni akıllı telefon tanıtıldı",
    "Sağlık Bakanlığı'ndan aşı çalışmaları hakkında önemli açıklama"
  ];

  // Rastgele breaking news seç
  document.getElementById('breakingNewsText').textContent = 
    breakingNewsTexts[Math.floor(Math.random() * breakingNewsTexts.length)];

  async function fetchNews() {
    const newsContainer = document.getElementById('newsContainer');
    const carouselInner = document.getElementById('carouselInner');
    const carouselIndicators = document.getElementById('carouselIndicators');

    // Display loading messages
    newsContainer.innerHTML = '<p class="text-center text-primary"><i class="fas fa-spinner fa-spin me-2"></i> Haberler yükleniyor...</p>';
    carouselInner.innerHTML = '<p class="text-center text-secondary"><i class="fas fa-spinner fa-spin me-2"></i> Slider haberleri yükleniyor...</p>';
    carouselIndicators.innerHTML = '';

    try {
      const rssUrl = 'https://www.trthaber.com/manset_articles.rss';
      const proxyUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;

      const res = await fetch(proxyUrl);
      const data = await res.json();

      if (data.status !== 'ok' || !data.items || data.items.length === 0) {
        const errorMessage = '<p class="text-center text-danger"><i class="fas fa-exclamation-triangle me-2"></i> Haberler alınamadı. Lütfen daha sonra tekrar deneyin.</p>';
        newsContainer.innerHTML = errorMessage;
        carouselInner.innerHTML = errorMessage;
        return;
      }

      allNewsData = data.items;
      displayNews(allNewsData.slice(0, currentDisplayCount));
      displayCarousel(allNewsData);

    } catch (err) {
      console.error("Haberleri alırken bir hata oluştu:", err);
      const connectionError = '<p class="text-center text-danger"><i class="fas fa-times-circle me-2"></i> Bağlantı hatası: Güncel haberler alınamadı. Lütfen internet bağlantınızı kontrol edin.</p>';
      newsContainer.innerHTML = connectionError;
      carouselInner.innerHTML = connectionError;
    }
  }

  function displayNews(newsItems, searchTerm = '', filterCategory = 'all') {
    const newsContainer = document.getElementById('newsContainer');
    
    // Eğer yeni bir arama/filtreleme yapılıyorsa, tüm haberleri temizle
    if (searchTerm || filterCategory !== 'all') {
      newsContainer.innerHTML = '';
      currentDisplayCount = 12; // Reset display count when filtering
    }

    let filteredNews = newsItems;

    // Kategoriye göre filtreleme
    if (filterCategory !== 'all') {
        filteredNews = filteredNews.filter(item => {
            const titleLower = item.title.toLowerCase();
            const descriptionLower = (item.description || '').toLowerCase();
            return titleLower.includes(filterCategory) || descriptionLower.includes(filterCategory);
        });
    }

    // Arama terimine göre filtreleme
    if (searchTerm) {
        const lowerCaseSearchTerm = searchTerm.toLowerCase();
        filteredNews = filteredNews.filter(item => {
            const titleLower = item.title.toLowerCase();
            const descriptionLower = (item.description || '').toLowerCase();
            return titleLower.includes(lowerCaseSearchTerm) || descriptionLower.includes(lowerCaseSearchTerm);
        });
    }

    if (filteredNews.length === 0) {
      newsContainer.innerHTML = '<p class="text-center text-warning"><i class="fas fa-info-circle me-2"></i> Aradığınız kriterlere uygun haber bulunamadı.</p>';
      document.getElementById('loadMoreBtn').style.display = 'none';
      return;
    }

    filteredNews.forEach((item, index) => {
      const imgMatch = item.description.match(/<img[^>]+src="([^"]+)"/);
      let imageUrl = imgMatch ? imgMatch[1] : 'https://via.placeholder.com/600x400?text=Haber+Resmi+Yok';
      if (imageUrl && !imageUrl.startsWith('http')) {
          imageUrl = 'https://via.placeholder.com/600x400?text=Haber+Resmi+Yok';
      }
      
      // Kategoriyi belirle (basit bir yaklaşım)
      let category = 'Gündem';
      const titleLower = item.title.toLowerCase();
      if (titleLower.includes('spor')) category = 'Spor';
      else if (titleLower.includes('ekonomi') || titleLower.includes('dolar') || titleLower.includes('borsa')) category = 'Ekonomi';
      else if (titleLower.includes('teknoloji') || titleLower.includes('yapay zeka') || titleLower.includes('apple') || titleLower.includes('samsung')) category = 'Teknoloji';
      else if (titleLower.includes('sağlık') || titleLower.includes('hastane') || titleLower.includes('doktor')) category = 'Sağlık';
      
      const cleanDescription = item.description.replace(/<[^>]*>?/gm, '').replace(/&nbsp;/g, ' ').trim();
      const shortDescription = cleanDescription.length > 180 ? cleanDescription.substring(0, 180) + '...' : cleanDescription;
      
      // Tarih formatlama
      const pubDate = new Date(item.pubDate);
      const formattedDate = pubDate.toLocaleDateString('tr-TR', {
        day: 'numeric',
        month: 'long',
        year: 'numeric'
      });

      const newsHTML = `
        <div class="col-lg-4 col-md-6 mb-4">
          <div class="card news-card h-100">
            <img src="${imageUrl}" class="card-img-top" alt="${item.title}" loading="lazy" onerror="this.onerror=null;this.src='https://via.placeholder.com/600x400?text=Resim+Yüklenemedi';">
            <div class="card-body">
              <span class="category-badge">${category}</span>
              <h5 class="card-title">${item.title}</h5>
              <p class="card-text">${shortDescription || 'Bu haber için kısa açıklama bulunmamaktadır.'}</p>
              <div class="news-meta">
                <i class="far fa-calendar-alt"></i> ${formattedDate}
              </div>
              <a href="${item.link}" class="btn btn-primary mt-auto" target="_blank" rel="noopener noreferrer">Haberi Oku <i class="fas fa-arrow-right ms-1"></i></a>
            </div>
          </div>
        </div>
      `;
      newsContainer.innerHTML += newsHTML;
    });

    // Daha fazla yükle butonunu kontrol et
    if (filteredNews.length <= currentDisplayCount || (searchTerm || filterCategory !== 'all')) {
      document.getElementById('loadMoreBtn').style.display = 'none';
    } else {
      document.getElementById('loadMoreBtn').style.display = 'inline-block';
    }
  }

  function displayCarousel(newsItems) {
    const carouselInner = document.getElementById('carouselInner');
    const carouselIndicators = document.getElementById('carouselIndicators');
    carouselInner.innerHTML = '';
    carouselIndicators.innerHTML = '';

    const carouselItems = newsItems.slice(0, 5);

    if (carouselItems.length === 0) {
      carouselInner.innerHTML = '<p class="text-center text-warning"><i class="fas fa-info-circle me-2"></i> Slider için haber bulunmamaktadır.</p>';
      return;
    }

    carouselItems.forEach((item, index) => {
      const imgMatch = item.description.match(/<img[^>]+src="([^"]+)"/);
      let imageUrl = imgMatch ? imgMatch[1] : 'https://via.placeholder.com/1200x600?text=Haber+Resmi+Yok';
      if (imageUrl && !imageUrl.startsWith('http')) {
          imageUrl = 'https://via.placeholder.com/1200x600?text=Haber+Resmi+Yok';
      }

      const cleanDescription = item.description.replace(/<[^>]*>?/gm, '').replace(/&nbsp;/g, ' ').trim();
      const shortDescription = cleanDescription.length > 200 ? cleanDescription.substring(0, 200) + '...' : cleanDescription;

      const carouselItemHTML = `
        <div class="carousel-item ${index === 0 ? 'active' : ''}">
          <img src="${imageUrl}" class="d-block w-100" alt="${item.title}" loading="lazy" onerror="this.onerror=null;this.src='https://via.placeholder.com/1200x600?text=Resim+Yüklenemedi';">
          <div class="carousel-caption d-none d-md-block">
            <h5>${item.title}</h5>
            <p>${shortDescription || 'Bu haber için kısa açıklama bulunmamaktadır.'}</p>
            <a href="${item.link}" class="btn btn-warning" target="_blank" rel="noopener noreferrer">Haberi Oku <i class="fas fa-arrow-right ms-1"></i></a>
          </div>
        </div>
      `;
      carouselInner.innerHTML += carouselItemHTML;

      const indicatorButton = `
        <button type="button" data-bs-target="#newsCarousel" data-bs-slide-to="${index}" class="${index === 0 ? 'active' : ''}" aria-current="${index === 0 ? 'true' : 'false'}" aria-label="Slide ${index + 1}"></button>
      `;
      carouselIndicators.innerHTML += indicatorButton;
    });
  }

  // Daha fazla haber yükleme fonksiyonu
  document.getElementById('loadMoreBtn').addEventListener('click', function() {
    currentDisplayCount += 6;
    displayNews(allNewsData.slice(0, currentDisplayCount));
  });

  // Back-to-top button functionality
  const backToTopBtn = document.getElementById("backToTopBtn");

  window.onscroll = function() { scrollFunction() };

  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      backToTopBtn.style.display = "block";
    } else {
      backToTopBtn.style.display = "none";
    }
  }

  function topFunction() {
    document.body.scrollTop = 0; // For Safari
    document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
  }

  // --- Dark Mode Functionality ---
  const darkModeToggle = document.getElementById('darkModeToggle');
  const body = document.body;

  // Check for saved dark mode preference on load
  const savedDarkMode = localStorage.getItem('darkMode');
  if (savedDarkMode === 'enabled') {
    body.classList.add('dark-mode');
    darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
  }

  // Toggle dark mode on button click
  darkModeToggle.addEventListener('click', () => {
    body.classList.toggle('dark-mode');
    if (body.classList.contains('dark-mode')) {
      localStorage.setItem('darkMode', 'enabled');
      darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
    } else {
      localStorage.setItem('darkMode', 'disabled');
      darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
    }
  });

  // --- Search Functionality ---
  const newsSearchInput = document.getElementById('newsSearchInput');
  const newsSearchButton = document.getElementById('newsSearchButton');

  function performSearchAndFilter() {
      const searchTerm = newsSearchInput.value.trim();
      const activeCategory = document.querySelector('.category-pill.active')?.dataset.filter || 'all';
      displayNews(allNewsData, searchTerm, activeCategory);
  }

  newsSearchButton.addEventListener('click', performSearchAndFilter);
  newsSearchInput.addEventListener('keyup', (event) => {
      if (event.key === 'Enter') {
          performSearchAndFilter();
      }
  });

  // --- Category Filtering Functionality ---
  const categoryPills = document.getElementById('categoryPills');
  categoryPills.addEventListener('click', (event) => {
      if (event.target.classList.contains('category-pill')) {
          event.preventDefault();
          document.querySelectorAll('.category-pill').forEach(pill => {
              pill.classList.remove('active');
          });
          event.target.classList.add('active');
          const filterCategory = event.target.dataset.filter;
          const searchTerm = newsSearchInput.value.trim();
          displayNews(allNewsData, searchTerm, filterCategory);
      }
  });

  // Newsletter form submission
  document.querySelector('.newsletter-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const email = this.querySelector('input').value;
    alert(`Aboneliğiniz için teşekkürler! ${email} adresine onay maili gönderildi.`);
    this.querySelector('input').value = '';
  });

  // Fetch news on page load and set interval for refresh
  window.onload = () => {
    fetchNews();
    setInterval(fetchNews, 60000 * 5); // Refresh news every 5 minutes
  };
</script>

</body>
</html>
